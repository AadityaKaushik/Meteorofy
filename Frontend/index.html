<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meteorofy - Weather Monitoring System</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            overflow-x: hidden;
        }

        .navbar {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 1.2rem;
            font-weight: bold;
        }

        .logo-icon {
            width: 40px;
            height: 40px;
            background: #0066cc;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
        }

        .nav-links {
            display: flex;
            gap: 2rem;
            list-style: none;
        }

        .nav-links a {
            color: white;
            text-decoration: none;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            transition: background 0.3s;
            cursor: pointer;
        }

        .nav-links a:hover, .nav-links a.active {
            background: rgba(255, 255, 255, 0.2);
        }

        .auth-section {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .login-btn {
            background: #20b2aa;
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 500;
        }

        .login-btn:hover {
            background: #1a9b94;
            transform: translateY(-2px);
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            background: #20b2aa;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        .logout-btn {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.3);
            padding: 0.5rem 1rem;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .logout-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .main-content {
            margin-top: 80px;
        }

        .section {
            min-height: 100vh;
            padding: 4rem 2rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .container {
            max-width: 1200px;
            width: 100%;
        }

        /* Home Section Styles */
        .home-section {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            text-align: center;
        }

        .hero h1 {
            font-size: 4rem;
            margin-bottom: 1rem;
            background: linear-gradient(135deg, #fff 0%, #87ceeb 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .hero .subtitle {
            font-size: 2.5rem;
            color: #4169e1;
            margin-bottom: 2rem;
        }

        .hero .description {
            font-size: 1.2rem;
            margin-bottom: 3rem;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
            line-height: 1.6;
        }

        .status-badge {
            background: rgba(255, 193, 7, 0.2);
            border: 1px solid #ffc107;
            color: #ffc107;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            display: inline-block;
            margin-bottom: 2rem;
        }

        .features {
            display: flex;
            justify-content: center;
            gap: 3rem;
            margin: 3rem 0;
            flex-wrap: wrap;
        }

        .feature {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            background: rgba(255, 255, 255, 0.1);
            padding: 1rem 1.5rem;
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .feature-icon {
            width: 20px;
            height: 20px;
            border-radius: 50%;
        }

        .green { background: #28a745; }
        .yellow { background: #ffc107; }
        .blue { background: #007bff; }

        .btn {
            background: #20b2aa;
            color: white;
            padding: 1rem 2rem;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 500;
            transition: all 0.3s;
        }

        .btn:hover {
            background: #1a9b94;
            transform: translateY(-2px);
        }

        /* Dashboard Section Styles */
        .dashboard-section {
            background: linear-gradient(135deg, #2a5298 0%, #1e3c72 100%);
        }

        .section-header {
            text-align: center;
            margin-bottom: 3rem;
        }

        .section-header h1 {
            font-size: 3rem;
            margin-bottom: 1rem;
        }

        .dashboard-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .dashboard-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 2rem;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .card-header {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
            font-size: 1.2rem;
            font-weight: 600;
        }

        .search-section {
            margin-bottom: 2rem;
        }

        .search-box {
            display: flex;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .search-input {
            flex: 1;
            padding: 1rem;
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
        }

        .search-input::placeholder {
            color: rgba(255, 255, 255, 0.7);
        }

        .search-btn {
            background: #6c757d;
            color: white;
            border: none;
            padding: 1rem 1.5rem;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .search-btn:hover {
            background: #5a6268;
        }

        .search-btn:disabled {
            background: #495057;
            cursor: not-allowed;
        }

        .popular-cities {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 0.5rem;
            margin-top: 1rem;
        }

        .city-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            padding: 0.8rem;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: left;
        }

        .city-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }

        .alerts-feed {
            max-height: 400px;
            overflow-y: auto;
        }

        .alert-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            margin-bottom: 0.5rem;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            border-left: 4px solid;
            transition: all 0.3s;
        }

        .alert-item:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateX(5px);
        }

        .alert-high { border-left-color: #dc3545; }
        .alert-medium { border-left-color: #ffc107; }
        .alert-low { border-left-color: #28a745; }
        .alert-info { border-left-color: #17a2b8; }

        .alert-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }

        .alert-content {
            flex: 1;
        }

        .alert-title {
            font-weight: 600;
            margin-bottom: 0.2rem;
        }

        .alert-location {
            font-size: 0.9rem;
            opacity: 0.8;
        }

        .alert-time {
            font-size: 0.8rem;
            opacity: 0.7;
        }

        /* Analytics Section Styles */
        .analytics-section {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .weather-chart-container {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 2rem;
            margin-bottom: 2rem;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .chart-header {
            margin-bottom: 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .chart-header h2 {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 1.5rem;
        }

        .chart-controls {
            display: flex;
            gap: 1rem;
            align-items: center;
            flex-wrap: wrap;
        }

        .location-display {
            background: rgba(255, 255, 255, 0.1);
            padding: 0.5rem 1rem;
            border-radius: 8px;
            font-size: 0.9rem;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .refresh-btn {
            background: #20b2aa;
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.9rem;
        }

        .refresh-btn:hover {
            background: #1a9b94;
        }

        .refresh-btn:disabled {
            background: #495057;
            cursor: not-allowed;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1rem;
            margin-top: 2rem;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.1);
            padding: 1.5rem;
            border-radius: 10px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s;
        }

        .stat-card:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-5px);
        }

        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
        }

        .stat-label {
            font-size: 0.9rem;
            opacity: 0.8;
        }

        .chart-loading {
            text-align: center;
            padding: 2rem;
            opacity: 0.7;
        }

        /* About Section Styles */
        .about-section {
            background: linear-gradient(135deg, #2a5298 0%, #1e3c72 100%);
        }

        .about-content {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 3rem;
            border: 1px solid rgba(255, 255, 255, 0.2);
            line-height: 1.6;
        }

        .about-content h2 {
            margin-bottom: 1rem;
            color: #87ceeb;
        }

        .about-content p {
            margin-bottom: 2rem;
        }

        .feature-list {
            display: grid;
            gap: 1rem;
            margin-top: 2rem;
        }

        .feature-item {
            background: rgba(255, 255, 255, 0.05);
            padding: 1rem;
            border-radius: 10px;
            border-left: 4px solid #20b2aa;
        }

        .api-info {
            background: rgba(0, 0, 0, 0.3);
            padding: 1rem;
            border-radius: 8px;
            font-family: monospace;
            margin: 1rem 0;
        }

        .active-badge {
            background: #20b2aa;
            padding: 0.2rem 0.8rem;
            border-radius: 12px;
            font-size: 0.8rem;
            margin-left: 0.5rem;
        }

        /* Login Modal Styles */
        .login-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
        }

        .login-form {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            padding: 3rem;
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            width: 100%;
            max-width: 450px;
            position: relative;
        }

        .login-form h2 {
            text-align: center;
            margin-bottom: 1rem;
            font-size: 2rem;
        }

        .login-form .subtitle {
            text-align: center;
            margin-bottom: 2rem;
            font-size: 0.9rem;
            opacity: 0.8;
            background: rgba(32, 178, 170, 0.2);
            padding: 0.8rem;
            border-radius: 10px;
            border: 1px solid rgba(32, 178, 170, 0.3);
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
        }

        .form-group input, .form-group select {
            width: 100%;
            padding: 1rem;
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 1rem;
        }

        .form-group input::placeholder {
            color: rgba(255, 255, 255, 0.7);
        }

        .close-btn {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            opacity: 0.7;
            transition: opacity 0.3s;
        }

        .close-btn:hover {
            opacity: 1;
        }

        .form-buttons {
            display: flex;
            gap: 1rem;
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.3);
            padding: 1rem 2rem;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 500;
            transition: all 0.3s;
            flex: 1;
        }

        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .btn {
            background: #20b2aa;
            color: white;
            padding: 1rem 2rem;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 500;
            transition: all 0.3s;
            flex: 1;
        }

        .btn:hover {
            background: #1a9b94;
            transform: translateY(-2px);
        }

        .hidden {
            display: none !important;
        }

        /* Smooth scrolling */
        html {
            scroll-behavior: smooth;
        }

        @media (max-width: 768px) {
            .navbar {
                flex-direction: column;
                gap: 1rem;
                padding: 1rem;
            }
            
            .nav-links {
                gap: 1rem;
            }
            
            .main-content {
                margin-top: 140px;
            }
            
            .dashboard-grid {
                grid-template-columns: 1fr;
            }
            
            .hero h1 {
                font-size: 2.5rem;
            }
            
            .hero .subtitle {
                font-size: 1.8rem;
            }
            
            .features {
                flex-direction: column;
                align-items: center;
            }
            
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .form-buttons {
                flex-direction: column;
            }

            .chart-controls {
                flex-direction: column;
                align-items: stretch;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="logo">
            <div class="logo-icon">🌊</div>
            <span>Meteorofy</span>
        </div>
        <ul class="nav-links">
            <li><a href="#home" class="nav-link active">Home</a></li>
            <li><a href="#dashboard" class="nav-link">Dashboard</a></li>
            <li><a href="#analytics" class="nav-link">Analytics</a></li>
            <li><a href="#about" class="nav-link">About</a></li>
        </ul>
        <div class="auth-section">
            <div class="user-info hidden" id="userInfo">
                <div class="user-avatar" id="userAvatar"></div>
                <span id="userName"></span>
                <button class="logout-btn" onclick="logout()">Logout</button>
            </div>
            <button class="login-btn" id="loginBtn" onclick="showLogin()">📱 Login for SMS Alerts</button>
        </div>
    </nav>

    <!-- Login Modal -->
    <div id="loginModal" class="login-modal hidden">
        <form class="login-form" onsubmit="handleLogin(event)">
            <button type="button" class="close-btn" onclick="hideLogin()">×</button>
            <h2>Join Meteorofy</h2>
            <div class="subtitle">
                📱 Get instant SMS alerts when climate disasters are approaching your state!
            </div>
            <div class="form-group">
                <label for="name">Full Name</label>
                <input type="text" id="name" name="name" placeholder="Enter your full name" required>
            </div>
            <div class="form-group">
                <label for="phone">Phone Number</label>
                <input type="tel" id="phone" name="phone" placeholder="Enter your phone number" required>
            </div>
            <div class="form-group">
                <label for="state">State</label>
                <select id="state" name="state" required>
                    <option value="">Select your state</option>
                    <option value="Andhra Pradesh">Andhra Pradesh</option>
                    <option value="Arunachal Pradesh">Arunachal Pradesh</option>
                    <option value="Assam">Assam</option>
                    <option value="Bihar">Bihar</option>
                    <option value="Chhattisgarh">Chhattisgarh</option>
                    <option value="Goa">Goa</option>
                    <option value="Gujarat">Gujarat</option>
                    <option value="Haryana">Haryana</option>
                    <option value="Himachal Pradesh">Himachal Pradesh</option>
                    <option value="Jharkhand">Jharkhand</option>
                    <option value="Karnataka">Karnataka</option>
                    <option value="Kerala">Kerala</option>
                    <option value="Madhya Pradesh">Madhya Pradesh</option>
                    <option value="Maharashtra">Maharashtra</option>
                    <option value="Manipur">Manipur</option>
                    <option value="Meghalaya">Meghalaya</option>
                    <option value="Mizoram">Mizoram</option>
                    <option value="Nagaland">Nagaland</option>
                    <option value="Odisha">Odisha</option>
                    <option value="Punjab">Punjab</option>
                    <option value="Rajasthan">Rajasthan</option>
                    <option value="Sikkim">Sikkim</option>
                    <option value="Tamil Nadu">Tamil Nadu</option>
                    <option value="Telangana">Telangana</option>
                    <option value="Tripura">Tripura</option>
                    <option value="Uttar Pradesh">Uttar Pradesh</option>
                    <option value="Uttarakhand">Uttarakhand</option>
                    <option value="West Bengal">West Bengal</option>
                </select>
            </div>
            <div class="form-buttons">
                <button type="button" class="btn-secondary" onclick="hideLogin()">Maybe Later</button>
                <button type="submit" class="btn">Enable SMS Alerts</button>
            </div>
        </form>
    </div>

    <div class="main-content">
        <!-- Home Section -->
        <section id="home" class="section home-section">
            <div class="container">
                <div class="hero">
                    <div class="status-badge">⚠ Real-time coastal monitoring</div>
                    <h1>AI-Powered Early Warning System</h1>
                    <div class="subtitle">for Natural Disasters</div>
                    <p class="description">
                        Check risk levels for any coastal location in real time. Advanced machine 
                        learning algorithms analyze weather patterns to predict cyclones, 
                        tsunamis, and heavy rainfall.
                    </p>
                    
                    <div class="features">
                        <div class="feature">
                            <div class="feature-icon green"></div>
                            <span>24/7 Monitoring</span>
                        </div>
                        <div class="feature">
                            <div class="feature-icon yellow"></div>
                            <span>Real-time Alerts</span>
                        </div>
                        <div class="feature">
                            <div class="feature-icon blue"></div>
                            <span>ML Predictions</span>
                        </div>
                    </div>
                    
                    <button class="btn" onclick="scrollToSection('dashboard')">Get Started ↓</button>
                </div>
            </div>
        </section>

        <!-- Dashboard Section -->
        <section id="dashboard" class="section dashboard-section">
            <div class="container">
                <div class="section-header">
                    <h1>Threat Monitoring Dashboard</h1>
                    <p>Search for any coastal location to get real-time threat analysis and weather monitoring.</p>
                </div>
                
                <div class="dashboard-grid">
                    <div class="dashboard-card">
                        <div class="card-header">
                            📍 Location Search
                        </div>
                        <div class="search-section">
                            <div class="search-box">
                                <input type="text" class="search-input" placeholder="Enter coastal city name..." id="locationSearch">
                                <button class="search-btn" onclick="searchLocation()">🔍</button>
                            </div>
                            <p style="font-size: 0.9rem; opacity: 0.8;">💡 Tip: Click on any city below or search for your coastal location to get real-time threat analysis.</p>
                        </div>
                        
                        <div class="popular-cities">
                            <button class="city-btn" onclick="selectCity('Mumbai')">📍 Mumbai</button>
                            <button class="city-btn" onclick="selectCity('Chennai')">📍 Chennai</button>
                            <button class="city-btn" onclick="selectCity('Kolkata')">📍 Kolkata</button>
                            <button class="city-btn" onclick="selectCity('Kochi')">📍 Kochi</button>
                            <button class="city-btn" onclick="selectCity('Visakhapatnam')">📍 Visakhapatnam</button>
                            <button class="city-btn" onclick="selectCity('Goa')">📍 Goa</button>
                            <button class="city-btn" onclick="selectCity('Mangalore')">📍 Mangalore</button>
                            <button class="city-btn" onclick="selectCity('Puducherry')">📍 Puducherry</button>
                        </div>
                    </div>
                    
                    <div class="dashboard-card">
                        <div class="card-header">
                            ⚠ Live Alerts Feed <span class="active-badge" id="activeBadge">0 Active</span>
                        </div>
                        <div class="alerts-feed" id="alertsFeed">
                            <div style="text-align: center; padding: 2rem; opacity: 0.7;">
                                <p>🔍 Search for a city to see live predictions here!</p>
                                <p style="font-size: 0.9rem; margin-top: 0.5rem;">Your API results will appear as alerts in this feed</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="dashboard-card">
                    <div class="card-header">
                        🔧 API Integration Ready
                    </div>
                    <p style="margin-bottom: 1rem;">This frontend is configured to integrate with your FastAPI backend endpoint:</p>
                    <div class="api-info">
                        POST /predict - Get hazard prediction + weather data<br>
                        GET /weather/{city} - Get only weather data for chart updates
                    </div>
                    <p style="font-size: 0.9rem; opacity: 0.8;">Search results now appear directly in the Live Alerts Feed above and update the Analytics chart!</p>
                </div>
            </div>
        </section>

        <!-- Analytics Section -->
        <section id="analytics" class="section analytics-section">
            <div class="container">
                <div class="section-header">
                    <h1>Weather Analytics</h1>
                    <p>Real-time weather patterns and trends over the last 24 hours</p>
                </div>
                
                <div class="weather-chart-container">
                    <div class="chart-header">
                        <h2>📈 Real-time Weather Data</h2>
                        <div class="chart-controls">
                            <div class="location-display" id="chartLocation">📍 Select a city to view weather data</div>
                            <button class="refresh-btn" id="refreshBtn" onclick="refreshWeatherData()" disabled>🔄 Refresh</button>
                        </div>
                    </div>
                    <div id="chartContainer">
                        <div class="chart-loading" id="chartLoading">
                            📊 Select a city from the dashboard to view real-time weather data
                        </div>
                        <canvas id="weatherChart" width="400" height="200" class="hidden"></canvas>
                    </div>
                </div>
                
                <div class="stats-grid" id="statsGrid">
                    <div class="stat-card">
                        <div class="stat-value" id="currentTemp">--°C</div>
                        <div class="stat-label">Current Temperature</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="currentHumidity">--%</div>
                        <div class="stat-label">Current Humidity</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="currentWind">--m/s</div>
                        <div class="stat-label">Current Wind Speed</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="currentPrecip">--mm</div>
                        <div class="stat-label">Current Precipitation</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- About Section -->
        <section id="about" class="section about-section">
            <div class="container">
                <div class="section-header">
                    <h1>About Meteorofy</h1>
                    <p>Advanced AI-powered coastal threat monitoring and early warning system</p>
                </div>
                
                <div class="about-content">
                    <h2>Our Mission</h2>
                    <p>
                        Meteorofy leverages cutting-edge artificial intelligence and machine learning algorithms to provide 
                        real-time coastal threat monitoring and early warning systems for natural disasters. Our platform 
                        analyzes complex weather patterns, oceanographic data, and historical trends to predict and alert 
                        communities about potential cyclones, tsunamis, and severe weather events.
                    </p>
                    
                    <h2>Key Features</h2>
                    <div class="feature-list">
                        <div class="feature-item">
                            <strong>🤖 AI Predictions:</strong> Advanced machine learning models trained on decades of meteorological and oceanographic data.
                        </div>
                        <div class="feature-item">
                            <strong>📱 SMS Alerts:</strong> Instant text message notifications sent directly to your phone when disasters threaten your state.
                        </div>
                        <div class="feature-item">
                            <strong>📊 Comprehensive Analytics:</strong> Detailed weather pattern analysis and trend visualization tools.
                        </div>
                        <div class="feature-item">
                            <strong>🌍 Wide Coverage:</strong> Monitoring capabilities for all major coastal regions and cities across India.
                        </div>
                        <div class="feature-item">
                            <strong>🔍 Real-time Monitoring:</strong> Continuous 24/7 surveillance of coastal weather conditions and threat indicators.
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <script>
        // User data storage
        let currentUser = null;
        let isLoggedIn = false;
        let weatherChart = null;
        let currentCity = null;
        let lastWeatherData = null;

        // Mock weather data for initial display
        const mockWeatherData = {
            humidity: [76, 78, 82, 85, 88, 85, 82, 79, 72, 75, 79, 83],
            temperature: [24, 24, 24, 25, 27, 32, 30, 29, 28, 26, 25, 25],
            windSpeed: [2, 3, 4, 5, 7, 6, 5, 3, 2, 3, 4, 5],
            timestamps: ['00:00', '02:00', '04:00', '06:00', '08:00', '10:00', '12:00', '14:00', '16:00', '18:00', '20:00', '22:00']
        };

        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            initWeatherChart();
            updateActiveNav();
        });

        // Smooth scrolling for navigation
        function scrollToSection(sectionId) {
            document.getElementById(sectionId).scrollIntoView({ behavior: 'smooth' });
        }

        // Update active navigation on scroll
        function updateActiveNav() {
            window.addEventListener('scroll', function() {
                const sections = ['home', 'dashboard', 'analytics', 'about'];
                const navLinks = document.querySelectorAll('.nav-link');
                
                let current = '';
                sections.forEach(section => {
                    const element = document.getElementById(section);
                    const rect = element.getBoundingClientRect();
                    if (rect.top <= 100 && rect.bottom >= 100) {
                        current = section;
                    }
                });
                
                navLinks.forEach(link => link.classList.remove('active'));
                if (current) {
                    const activeLink = document.querySelector(`a[href="#${current}"]`);
                    if (activeLink) activeLink.classList.add('active');
                }
            });
        }

        // Login modal handling
        function showLogin() {
            document.getElementById('loginModal').classList.remove('hidden');
        }

        function hideLogin() {
            document.getElementById('loginModal').classList.add('hidden');
        }

        // Login handling
        function handleLogin(event) {
            event.preventDefault();
            
            const formData = new FormData(event.target);
            const userData = {
                name: formData.get('name'),
                phone: formData.get('phone'),
                state: formData.get('state'),
                loginTime: new Date().toISOString()
            };

            // In production, send this data to your SQL server
            console.log('User data to store in SQL server:', userData);
            
            // Store user data locally for this session
            currentUser = userData;
            isLoggedIn = true;
            
            // Update UI
            updateUserInfo();
            hideLogin();
            
            // Show success message
            alert(`Welcome ${userData.name}! You will now receive SMS alerts for climate disasters in ${userData.state}.`);
        }

        function updateUserInfo() {
            if (currentUser) {
                document.getElementById('userInfo').classList.remove('hidden');
                document.getElementById('loginBtn').classList.add('hidden');
                document.getElementById('userName').textContent = currentUser.name;
                document.getElementById('userAvatar').textContent = currentUser.name.charAt(0).toUpperCase();
            }
        }

        function logout() {
            currentUser = null;
            isLoggedIn = false;
            document.getElementById('userInfo').classList.add('hidden');
            document.getElementById('loginBtn').classList.remove('hidden');
            alert('You have been logged out. You will no longer receive SMS alerts.');
        }

        // Location search functionality with real-time weather chart updates
        async function searchLocation() {
            const location = document.getElementById('locationSearch').value.trim();
            if (!location) return;

            // Show loading state
            const searchBtn = document.querySelector('.search-btn');
            const originalText = searchBtn.innerHTML;
            searchBtn.innerHTML = '⏳';
            searchBtn.disabled = true;

            try {
                // Call your FastAPI backend for prediction + weather data
                const response = await fetch("http://127.0.0.1:8000/predict", {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify({ city: location })
                });

                const data = await response.json();

                if (response.ok && data.weather_data) {
                    // Add the prediction result to the live feed
                    addToLiveFeed(data);
                    
                    // Update the weather chart with real data
                    updateWeatherChart(data.weather_data, data.city);
                    
                    // Update current city for refresh functionality
                    currentCity = data.city;
                    lastWeatherData = data.weather_data;
                    
                    // Clear the search input
                    document.getElementById('locationSearch').value = '';
                } else {
                    addToLiveFeed({
                        city: location,
                        hazard_prediction: "Error: " + (data.error || "Could not fetch weather data"),
                        isError: true
                    });
                }
            } catch (err) {
                console.error("Error fetching prediction:", err);
                addToLiveFeed({
                    city: location,
                    hazard_prediction: "Connection failed - Check if FastAPI is running",
                    isError: true
                });
            } finally {
                // Reset button state
                searchBtn.innerHTML = originalText;
                searchBtn.disabled = false;
            }
        }

        // Function to refresh weather data for current city
        async function refreshWeatherData() {
            if (!currentCity) return;

            const refreshBtn = document.getElementById('refreshBtn');
            const originalText = refreshBtn.innerHTML;
            refreshBtn.innerHTML = '⏳ Loading...';
            refreshBtn.disabled = true;

            try {
                const response = await fetch(`http://127.0.0.1:8000/weather/${currentCity}`);
                const data = await response.json();

                if (response.ok && data.weather_data) {
                    updateWeatherChart(data.weather_data, data.city);
                    lastWeatherData = data.weather_data;
                    
                    // Show success feedback
                    refreshBtn.innerHTML = '✅ Updated';
                    setTimeout(() => {
                        refreshBtn.innerHTML = '🔄 Refresh';
                    }, 2000);
                } else {
                    throw new Error(data.error || 'Failed to refresh data');
                }
            } catch (err) {
                console.error("Error refreshing weather data:", err);
                refreshBtn.innerHTML = '❌ Error';
                setTimeout(() => {
                    refreshBtn.innerHTML = '🔄 Refresh';
                }, 2000);
            } finally {
                refreshBtn.disabled = false;
            }
        }

        // Function to update the weather chart with real data
        function updateWeatherChart(weatherData, cityName) {
            if (!weatherChart) {
                initWeatherChart();
            }

            // Update chart location display
            document.getElementById('chartLocation').textContent = `📍 ${cityName}`;
            document.getElementById('refreshBtn').disabled = false;

            // Show chart and hide loading message
            document.getElementById('weatherChart').classList.remove('hidden');
            document.getElementById('chartLoading').classList.add('hidden');

            // Update chart data
            weatherChart.data.labels = weatherData.timestamps;
            weatherChart.data.datasets[0].data = weatherData.humidity;
            weatherChart.data.datasets[1].data = weatherData.temperature;
            weatherChart.data.datasets[2].data = weatherData.wind_speed;

            // Add precipitation as a new dataset if available
            if (weatherData.precipitation && !weatherChart.data.datasets.find(d => d.label === 'Precipitation (mm)')) {
                weatherChart.data.datasets.push({
                    label: 'Precipitation (mm)',
                    data: weatherData.precipitation,
                    borderColor: '#6366f1',
                    backgroundColor: 'rgba(99, 102, 241, 0.1)',
                    tension: 0.4,
                    fill: false,
                    pointRadius: 4,
                    pointHoverRadius: 6
                });
            } else if (weatherData.precipitation) {
                const precipDataset = weatherChart.data.datasets.find(d => d.label === 'Precipitation (mm)');
                if (precipDataset) {
                    precipDataset.data = weatherData.precipitation;
                }
            }

            // Update the chart
            weatherChart.update('none'); // No animation for faster updates

            // Update current stats
            updateCurrentStats(weatherData.current);
        }

        // Function to update current statistics
        function updateCurrentStats(currentData) {
            if (!currentData) return;

            document.getElementById('currentTemp').textContent = 
                currentData.temperature ? `${Math.round(currentData.temperature)}°C` : '--°C';
            document.getElementById('currentHumidity').textContent = 
                currentData.humidity ? `${Math.round(currentData.humidity)}%` : '--%';
            document.getElementById('currentWind').textContent = 
                currentData.wind_speed ? `${Math.round(currentData.wind_speed)}m/s` : '--m/s';
            document.getElementById('currentPrecip').textContent = 
                currentData.precipitation ? `${currentData.precipitation}mm` : '--mm';
        }

        // Function to add new results to the live feed
        function addToLiveFeed(data) {
            const alertsFeed = document.getElementById('alertsFeed');
            
            // Clear the initial placeholder message if it exists
            const placeholder = alertsFeed.querySelector('div[style*="text-align: center"]');
            if (placeholder) {
                placeholder.remove();
            }
            
            const currentTime = new Date();
            const timeString = currentTime.toLocaleTimeString('en-US', { 
                hour12: false, 
                hour: '2-digit', 
                minute: '2-digit' 
            });

            // Determine alert type and icon based on hazard prediction
            let alertType, icon, bgColor;
            const prediction = data.hazard_prediction.toLowerCase();
            
            if (data.isError) {
                alertType = 'alert-medium';
                icon = '❌';
                bgColor = '#ffc107';
            } else if (prediction.includes('flood') || prediction.includes('tsunami') || prediction.includes('cyclone')) {
                alertType = 'alert-high';
                icon = '🌊';
                bgColor = '#dc3545';
            } else if (prediction.includes('storm') || prediction.includes('rain') || prediction.includes('wind')) {
                alertType = 'alert-medium';
                icon = '⛈️';
                bgColor = '#ffc107';
            } else if (prediction.includes('clear') || prediction.includes('safe') || prediction.includes('normal')) {
                alertType = 'alert-low';
                icon = '☀️';
                bgColor = '#28a745';
            } else {
                alertType = 'alert-info';
                icon = '🔍';
                bgColor = '#17a2b8';
            }

            // Create new alert item
            const newAlert = document.createElement('div');
            newAlert.className = `alert-item ${alertType}`;
            newAlert.innerHTML = `
                <div class="alert-icon" style="background: ${bgColor};">${icon}</div>
                <div class="alert-content">
                    <div class="alert-title">${data.hazard_prediction}</div>
                    <div class="alert-location">📍 ${data.city}</div>
                </div>
                <div class="alert-time">${timeString}</div>
            `;

            // Add animation
            newAlert.style.opacity = '0';
            newAlert.style.transform = 'translateX(-20px)';
            
            // Insert at the top of the feed
            alertsFeed.insertBefore(newAlert, alertsFeed.firstChild);
            
            // Animate in
            setTimeout(() => {
                newAlert.style.transition = 'all 0.5s ease';
                newAlert.style.opacity = '1';
                newAlert.style.transform = 'translateX(0)';
            }, 10);

            // Remove old alerts if there are too many (keep only last 8)
            const allAlerts = alertsFeed.querySelectorAll('.alert-item');
            if (allAlerts.length > 8) {
                allAlerts[allAlerts.length - 1].remove();
            }

            // Update active count
            updateActiveCount();
        }

        // Update the active alerts count
        function updateActiveCount() {
            const activeCount = document.querySelectorAll('.alert-item').length;
            const activeBadge = document.getElementById('activeBadge');
            activeBadge.textContent = `${activeCount} Active`;
        }

        function selectCity(city) {
            document.getElementById('locationSearch').value = city;
            searchLocation();
        }

        // Weather chart initialization
        function initWeatherChart() {
            const ctx = document.getElementById('weatherChart');
            if (!ctx) return;

            weatherChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: [],
                    datasets: [{
                        label: 'Humidity (%)',
                        data: [],
                        borderColor: '#20b2aa',
                        backgroundColor: 'rgba(32, 178, 170, 0.1)',
                        tension: 0.4,
                        fill: false,
                        pointRadius: 4,
                        pointHoverRadius: 6
                    }, {
                        label: 'Temperature (°C)',
                        data: [],
                        borderColor: '#ff6b6b',
                        backgroundColor: 'rgba(255, 107, 107, 0.1)',
                        tension: 0.4,
                        fill: false,
                        pointRadius: 4,
                        pointHoverRadius: 6
                    }, {
                        label: 'Wind Speed (m/s)',
                        data: [],
                        borderColor: '#4ecdc4',
                        backgroundColor: 'rgba(78, 205, 196, 0.1)',
                        tension: 0.4,
                        fill: false,
                        pointRadius: 4,
                        pointHoverRadius: 6
                    }]
                },
                options: {
                    responsive: true,
                    interaction: {
                        intersect: false,
                        mode: 'index'
                    },
                    plugins: {
                        legend: {
                            labels: {
                                color: 'white',
                                usePointStyle: true,
                                padding: 20
                            }
                        },
                        tooltip: {
                            backgroundColor: 'rgba(0, 0, 0, 0.8)',
                            titleColor: 'white',
                            bodyColor: 'white',
                            borderColor: 'rgba(255, 255, 255, 0.2)',
                            borderWidth: 1
                        }
                    },
                    scales: {
                        x: {
                            ticks: {
                                color: 'white',
                                maxTicksLimit: 12
                            },
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)'
                            }
                        },
                        y: {
                            ticks: {
                                color: 'white'
                            },
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)'
                            }
                        }
                    },
                    elements: {
                        point: {
                            hoverRadius: 8
                        }
                    }
                }
            });
        }
        
        // Add click handlers for navigation links
        document.addEventListener('DOMContentLoaded', function() {
            const navLinks = document.querySelectorAll('.nav-link');
            navLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const targetId = this.getAttribute('href').substring(1);
                    scrollToSection(targetId);
                });
            });
        });

        // Close modal when clicking outside
        document.addEventListener('click', function(e) {
            const modal = document.getElementById('loginModal');
            if (e.target === modal) {
                hideLogin();
            }
        });

        // Enter key support for search
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('locationSearch').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    searchLocation();
                }
            });
        });
    </script>
</body>
</html>